<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, viewport-fit=cover">
    <meta name="description" content="Wiskoro - De enige wiskunde GOAT die jou feiten dropt! ðŸ”¥">
    <title>Wiskoro - Wiskunde Feiten</title>
    <link rel="preconnect" href="https://rsms.me">
    <link rel="stylesheet" href="https://rsms.me/inter/inter.css">
    <style>
        :root {
            color-scheme: light dark;
            --bg-color-light: #f9f9f9;
            --bg-color-dark: #1e1e1e;
            --text-color-light: #333;
            --text-color-dark: #f5f5f5;
            --chat-bg-light: #ffffff;
            --chat-bg-dark: #2a2a2a;
            --border-color-light: #ddd;
            --border-color-dark: #444;
            --button-color: #007aff;
            --button-hover: #005ecb;
            --fact-bg-light: #d4edda;
            --fact-bg-dark: #218c74;
            --system-bg-light: #e3f2fd;
            --system-bg-dark: #0a74da;
            --button-text: white;
        }

        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            position: fixed;
            width: 100%;
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'Inter', system-ui, sans-serif;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        #chat-container {
            display: flex;
            flex-direction: column;
            width: 100%;
            height: 100vh;
            background-color: var(--chat-bg);
        }

        #chat-box {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
            padding-bottom: 130px;
            scroll-behavior: smooth;
            display: flex;
            flex-direction: column;
        }

        .message {
            display: block;
            padding: 1rem;
            border-radius: 1.5rem;
            max-width: 75%;
            word-wrap: break-word;
            animation: fadeIn 0.3s ease-in-out;
            margin: 0.5rem 0;
            font-size: 1rem;
            line-height: 1.4;
            align-self: flex-start;
        }

        .fact {
            background-color: var(--fact-bg-light);
            color: black;
            align-self: flex-start;
            border-top-left-radius: 0.5rem;
            font-weight: bold;
        }

        .fact.dark-mode {
            background-color: var(--fact-bg-dark);
            color: white;
        }

        .system {
            background-color: var(--system-bg-light);
            color: black;
            align-self: flex-start;
        }

        .system.dark-mode {
            background-color: var(--system-bg-dark);
            color: white;
        }

        .input-container {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 1.5rem 1rem;
            background-color: var(--chat-bg);
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            width: 100%;
            box-sizing: border-box;
        }

        #fact-button {
            flex: 1;
            max-width: 90%;
            padding: 1.4rem;
            font-size: 1.2rem;
            border-radius: 2rem;
            border: none;
            background-color: var(--button-color);
            color: var(--button-text);
            font-weight: 700;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.1s;
            text-align: center;
        }

        #fact-button:hover {
            background-color: var(--button-hover);
        }

        #fact-button:active {
            transform: scale(0.98);
        }

        @media (max-width: 480px) {
            .message {
                max-width: 90%;
            }

            .input-container {
                padding: 1rem;
            }

            #fact-button {
                padding: 1rem;
                font-size: 1rem;
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(0.5rem); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div id="chat-container">
        <div id="chat-box" role="log" aria-live="polite"></div>
        <div class="input-container">
            <button id="fact-button">ðŸ”¥ Drop nog een feitje</button>
        </div>
    </div>

    <script>
        const backendUrl = "https://api.wiskoro.nl/fact";

        const buttonFacts = [
            "ðŸ”¥ Drop nog een feitje", "Yo, gooi nog zoâ€™n feit! ðŸ¤“", 
            "Hit me up met wiskunde sauce ðŸ§ ", "Wat weet je nog meer? ðŸ¤”", 
            "Nog een, ik ben nog niet vol! ðŸ“š", "Tik nog een wiskunde-juweeltje ðŸ’Ž", 
            "Kom maar door met de kennis! ðŸš€", "Gimme die facts, bro! ðŸ˜Ž"
        ];

        const loadingMessages = [
            "Even die brain cells activeren...",
            "Matrix hacken voor je antwoord...",
            "Formules spotten zoals een echte G...",
            "Wiskunde sauce loading...",
            "Calculations on fleek incoming..."
        ];
        
        const errorMessages = [
            "Ey g, die server left us on read! ðŸ’€ Probeer ff opnieuw!",
            "Nah fam, connection is skeer rn. Check je wifi en probeer nog een x! ðŸ”Œ",
            "Yo my g, er ging iets fout in de matrix! Refresh die pagina en we gaan door! ðŸ”„"
        ];

        function getRandomItem(array) {
            return array[Math.floor(Math.random() * array.length)];
        }

        function updateButtonText() {
            document.getElementById("fact-button").textContent = getRandomItem(buttonFacts);
        }

        function addMessage(content, type) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}`;

            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                messageDiv.classList.add("dark-mode");
            }

            messageDiv.innerHTML = content;
            document.getElementById("chat-box").appendChild(messageDiv);
            document.getElementById("chat-box").scrollTop = document.getElementById("chat-box").scrollHeight;
        }

        async function fetchFact() {
            try {
                addMessage(getRandomItem(loadingMessages), 'system');
                const response = await fetch(backendUrl, { method: 'GET' });
                if (!response.ok) throw new Error('Network error');
                const data = await response.json();
                addMessage(data.response, 'fact');
            } catch (error) {
                addMessage(getRandomItem(errorMessages), 'system');
            } finally {
                updateButtonText();
            }
        }

        document.getElementById("fact-button").addEventListener("click", fetchFact);

        document.addEventListener("DOMContentLoaded", () => {
            addMessage("Yo! Klaar om wat wiskunde feiten te checken? ðŸ”¥ Druk op de knop!", "system");
        });
    </script>
</body>
</html>
